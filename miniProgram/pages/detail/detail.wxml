<!--detail.wxml-->
<view class="container">
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view class="detail-content" wx:elif="{{item}}">
    <!-- é€‰é¡¹ä¿¡æ¯å¡ç‰‡ -->
    <view class="card">
      <view class="card-header">
        <text>é€‰é¡¹è¯¦æƒ…</text>
      </view>
      <view class="card-body">
        <view class="item-header">
          <view class="item-color" style="background-color: {{item.color || '#f0f0f0'}}"></view>
          <view class="item-title">
            <text class="item-name">{{item.name}}</text>
            <text class="item-set">æ¥è‡ªï¼š{{setName}}</text>
          </view>
        </view>

        <view class="item-description" wx:if="{{item.description}}">
          <view class="desc-title">å¤‡æ³¨è¯´æ˜</view>
          <view class="desc-content">{{item.description}}</view>
        </view>

        <view class="item-meta">
          <view class="meta-row">
            <text class="meta-label">é¢œè‰²ä»£ç ï¼š</text>
            <text class="meta-value">{{item.color || 'é»˜è®¤'}}</text>
          </view>
          <view class="meta-row" wx:if="{{item.createdAt}}">
            <text class="meta-label">åˆ›å»ºæ—¶é—´ï¼š</text>
            <text class="meta-value">{{formatTime(item.createdAt)}}</text>
          </view>
          <view class="meta-row" wx:if="{{item.updatedAt}}">
            <text class="meta-label">æœ€åæ›´æ–°ï¼š</text>
            <text class="meta-value">{{formatTime(item.updatedAt)}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="card">
      <view class="card-header">
        <text>æ“ä½œ</text>
      </view>
      <view class="card-body">
        <view class="action-buttons">
          <button class="btn btn-primary action-btn" bindtap="goToManagement">
            <text class="btn-icon">âœï¸</text>
            <text>ç¼–è¾‘æ­¤å¥—é¤</text>
          </button>
          <button class="btn btn-secondary action-btn" bindtap="goToHome">
            <text class="btn-icon">ğŸ¯</text>
            <text>å¼€å§‹è½¬ç›˜</text>
          </button>
        </view>
      </view>
    </view>

    <!-- ç›¸å…³é€‰é¡¹ -->
    <view class="card" wx:if="{{relatedItems.length > 0}}">
      <view class="card-header">
        <text>åŒå¥—é¤å…¶ä»–é€‰é¡¹</text>
      </view>
      <view class="card-body">
        <view class="related-list">
          <view 
            class="related-item"
            wx:for="{{relatedItems}}"
            wx:key="id"
            bindtap="viewRelatedItem"
            data-id="{{item.id}}"
          >
            <view class="related-color" style="background-color: {{item.color || '#f0f0f0'}}"></view>
            <text class="related-name">{{item.name}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="error" wx:else>
    <view class="error-icon">ğŸ˜µ</view>
    <view class="error-text">æœªæ‰¾åˆ°è¯¥é€‰é¡¹</view>
    <button class="btn btn-primary" bindtap="goBack">è¿”å›</button>
  </view>
</view>
